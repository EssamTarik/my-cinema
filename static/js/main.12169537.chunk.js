(this["webpackJsonpmy-cinema"]=this["webpackJsonpmy-cinema"]||[]).push([[0],{57:function(e,t,a){e.exports=a(96)},66:function(e,t,a){},68:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(29),o=a.n(c),i=a(11),s=a(101),l=a(45),u=(a(66),a(19)),m=a(10),v=Object({NODE_ENV:"production",PUBLIC_URL:"/my-cinema",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TMDB_API_KEY:"42cbedfc1bc2e5e4990db149d22bb293",REACT_APP_TMDB_API_URL:"https://api.themoviedb.org/3",REACT_APP_TMDB_IMAGE_BASE_URL:"https://image.tmdb.org/t/p",REACT_APP_ROUTER_BASE_NAME:"/my-cinema"}),d=v.REACT_APP_TMDB_API_KEY,E=void 0===d?"":d,h=v.REACT_APP_TMDB_API_URL,_=void 0===h?"":h,p=v.REACT_APP_TMDB_IMAGE_BASE_URL,f=void 0===p?"":p,b=a(99),g=a(55),T=function(e){var t=e.onChange,a=e.value,n=void 0===a?"":a,c=Object(b.a)();return r.a.createElement(g.a.Control,{value:n,placeholder:c.formatMessage({id:"searchBar.placeholder"}),type:"text",onChange:function(e){var a=e.target.value;return t(a)}})},O=a(32),R=a(4),A=a.n(R),y=a(100),C=a(47),F=a(28),S=(a(68),function(){var e=Object(n.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(n.useCallback)((function(){c(!a)}),[a,c]);return r.a.createElement("div",{className:"navigation-bar"},r.a.createElement(u.b,{className:"navigation-bar__title",to:"/"},r.a.createElement(y.a,{id:"navBar.title"})),r.a.createElement("div",{onClick:o,className:A()("navigation-bar__menu",{"navigation-bar__menu--mobile-open":a})},r.a.createElement(u.c,{exact:!0,activeClassName:"navigation-bar__menu__item--active",className:"navigation-bar__menu__item",to:"/"},r.a.createElement(y.a,{id:"navBar.search"})),r.a.createElement(u.c,{exact:!0,activeClassName:"navigation-bar__menu__item--active",className:"navigation-bar__menu__item",to:"favorites"},r.a.createElement(y.a,{id:"navBar.favorites"})),r.a.createElement(u.c,{exact:!0,activeClassName:"navigation-bar__menu__item--active",className:"navigation-bar__menu__item",to:"watch-later"},r.a.createElement(y.a,{id:"navBar.watchLater"})),r.a.createElement("button",{type:"button",className:"navigation-bar__menu-close-btn"},r.a.createElement(F.b,{color:"white"}))),r.a.createElement("button",{type:"button",onClick:o,className:"navigation-bar__menu-btn"},r.a.createElement(C.a,{size:20,color:"white"})))}),j=a(40),L=function(e){var t=e.movies,a=e.favorites,n=e.watchLater,c=e.addFavorite,o=e.removeFavorite,i=e.addWatchLater,s=e.removeWatchLater;return r.a.createElement(z,{movies:t,favorites:a,watchLater:n,onAddToFavorites:c,onRemoveFromFavorites:o,onAddToWatchLater:i,onRemoveFromWatchLater:s})},w={addFavorite:function(e){return{type:"FAVORITE/ADD",payload:e}},removeFavorite:function(e){return{type:"FAVORITE/REMOVE",payload:e}},removeWatchLater:function(e){return{type:"WATCH_LATER/REMOVE",payload:e}},addWatchLater:function(e){return{type:"WATCH_LATER/ADD",payload:e}}},M=Object(i.b)((function(e){return{favorites:e.favorites,watchLater:e.watchLater}}),w)(L),I=function(e){var t=e.movieSearchState,a=t.isFetching,n=t.isFetched,c=t.data,o=t.error;if(a||!n||!c)return null;if(o)return r.a.createElement("div",{className:"movie-search__error"},o);var i=c.results;return r.a.createElement(M,{movies:i})},N=Object(i.b)((function(e){return{movieSearchState:e.movieSearch}}))(I),x=function(e){var t=e.favorites,a=Object.values(t);return r.a.createElement(M,{movies:a})},k=Object(i.b)((function(e){return{favorites:e.favorites}}))(x),P=function(e){var t=e.watchLater,a=Object.values(t);return r.a.createElement(M,{movies:a})},W=Object(i.b)((function(e){return{watchLater:e.watchLater}}))(P),V=a(14),H=a.n(V),D=a(18),B=a(39),U=function(){var e=Object(D.a)(H.a.mark((function e(t,a){var n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(D.a)(H.a.mark((function e(t){var a,n,r,c,o,i=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:1,n=i.length>2&&void 0!==i[2]?i[2]:_,r=i.length>3&&void 0!==i[3]?i[3]:E,c="search/movie?".concat(Object(B.stringify)({query:t,api_key:r,page:a})),e.next=6,U(c,n);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(D.a)(H.a.mark((function e(t){var a,n,r,c,o=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:_,n=o.length>2&&void 0!==o[2]?o[2]:E,r="movie/".concat(t,"/trailers?").concat(Object(B.stringify)({api_key:n})),e.next=5,U(r,a);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=(a(73),function(e){var t=e.resetMovieTrailer,a=e.onRequestClose,c=e.movie.id,o=e.trailerState,i=o.data,s=o.error,l=o.isFetched,u=e.getMovieTrailer;Object(n.useEffect)((function(){u(c)}),[c,u]),Object(n.useEffect)((function(){return function(){t()}}),[t]);var m=l&&!i;return r.a.createElement(Q,{onRequestClose:a},(m||s)&&r.a.createElement("div",{className:"movie-trailer-modal__not-found"},r.a.createElement(y.a,{id:"movieTrailer.notFound"})),i&&r.a.createElement(ee,{trailer:i}))}),J={getMovieTrailer:function(e){return function(){var t=Object(D.a)(H.a.mark((function t(a){var n,r,c,o,i;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"MOVIE_TRAILER_FETCH/START"}),t.prev=1,t.next=4,K(e);case 4:n=t.sent,r=n.youtube,c=r[0],a({type:"MOVIE_TRAILER_FETCH/SUCCESS",payload:c}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),o=t.t0,i=o.message,a({type:"MOVIE_TRAILER_FETCH/FAILED",payload:i});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},resetMovieTrailer:function(){return{type:"MOVIE_TRAILER_FETCH/RESET"}}},X=Object(i.b)((function(e){return{trailerState:e.trailer}}),J)(G),Y=(a(74),function(e){var t,a,c=e.movie,o=e.favorite,i=void 0!==o&&o,s=e.watchLater,l=void 0!==s&&s,u=e.onAddToFavorites,m=e.onAddToWatchLater,v=e.onRemoveFromFavorites,d=e.onRemoveFromWatchLater,E=Object(n.useState)(!1),h=Object(O.a)(E,2),_=h[0],p=h[1],g=c.poster_path,T=c.original_title,R=Object(b.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"movie-card"},r.a.createElement("button",{type:"button",title:R.formatMessage({id:"movie.".concat(i?"removeFromFavorites":"addToFavorites")}),onClick:i?v:u,className:"movie-card__action-btn movie-card__fav-btn"},i?r.a.createElement(F.a,{fill:"yellow"}):r.a.createElement(F.c,{fill:"lightgrey"})),r.a.createElement("button",{type:"button",title:R.formatMessage({id:"movie.".concat(l?"removeFromWatchLater":"addToWatchLater")}),onClick:l?d:m,className:"movie-card__action-btn movie-card__watch-later-btn"},l?r.a.createElement(j.a,{fill:"orange"}):r.a.createElement(j.a,{fill:"grey"})),r.a.createElement("div",{onClick:function(){return p(!0)},className:"movie-card__content"},g?r.a.createElement("img",{className:"movie-card__poster",src:(t=g,a=185,"".concat(f,"/w").concat(a).concat(t)),alt:T}):r.a.createElement("div",{className:"movie-card__poster-missing"},r.a.createElement(y.a,{id:"movie.posterMissing"}))),r.a.createElement("div",{className:"movie-card__title"},T)),_&&r.a.createElement(X,{movie:c,onRequestClose:function(){return p(!1)}}))}),z=(a(75),function(e){var t=e.movies,a=e.favorites,n=e.watchLater,c=e.onAddToFavorites,o=e.onRemoveFromFavorites,i=e.onAddToWatchLater,s=e.onRemoveFromWatchLater;return 0===t.length?r.a.createElement("div",{className:"movie-grid__no-results"},r.a.createElement(y.a,{id:"movie.noResults"})):r.a.createElement("div",{className:"movie-grid"},t.map((function(e){var t=void 0!==a[e.id],l=void 0!==n[e.id];return r.a.createElement(Y,{key:e.id,movie:e,favorite:t,watchLater:l,onAddToFavorites:function(){return c(e)},onAddToWatchLater:function(){return i(e)},onRemoveFromFavorites:function(){return o(e)},onRemoveFromWatchLater:function(){return s(e)}})})))}),$=(a(76),function(e){var t=e.page,a=e.totalPages,n=e.onNextClick,c=e.onPreviousClick,o=t===a,i=1===t;return r.a.createElement("div",{className:"pagination"},r.a.createElement("div",{className:"pagination__prev-container"},r.a.createElement("button",{type:"button",onClick:c,disabled:i,className:A()("pagination__btn")},r.a.createElement(y.a,{id:"pagination.previous"}))),r.a.createElement("div",{className:"pagination__next-container"},r.a.createElement("button",{type:"button",onClick:n,disabled:o,className:A()("pagination__btn")},r.a.createElement(y.a,{id:"pagination.next"}))))}),Q=(a(77),function(e){var t=e.onRequestClose,a=e.children;return r.a.createElement("div",{onClick:t,className:"full-screen-modal"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"modal__content"},a))}),Z=a(48),ee=(a(90),function(e){var t=e.trailer.source;return r.a.createElement("div",{className:"movie-trailer"},r.a.createElement(Z.a,{opts:{width:"100%"},videoId:t}))}),te=(a(91),function(e){var t=e.children;return r.a.createElement("div",{className:"main-layout"},r.a.createElement(S,null),r.a.createElement("div",{className:"main-layout__content"},t))}),ae=a(51),ne=a.n(ae),re=(a(92),function(e){var t=e.searchText,a=e.setSearchText,c=e.movieSearchState,o=e.searchMovies,i=Object(n.useCallback)(ne()(o,700),[o]),s=Object(n.useCallback)((function(e){a(e),i(e,1)}),[a,i]),l=Object(n.useCallback)((function(e){o(t,e)}),[t,o]),u=c.data;return r.a.createElement("div",{className:"search-page"},r.a.createElement("div",{className:"search-page__search-bar-container"},r.a.createElement(T,{value:t,onChange:s})),r.a.createElement("div",{className:"search-page__search-results-container"},r.a.createElement(N,null)),u&&u.total_pages>0&&r.a.createElement($,{totalPages:u.total_pages,page:u.page,onNextClick:function(){return l(u.page+1)},onPreviousClick:function(){return l(u.page-1)}}))}),ce={searchMovies:function(e,t){return function(){var a=Object(D.a)(H.a.mark((function a(n){var r,c,o;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n({type:"MOVIE_SEARCH/START"}),e){a.next=3;break}return a.abrupt("return",n({type:"MOVIE_SEARCH/RESET"}));case 3:return a.prev=3,a.next=6,q(e,t);case 6:r=a.sent,n({type:"MOVIE_SEARCH/SUCCESS",payload:r}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(3),c=a.t0,o=c.message,n({type:"MOVIE_SEARCH/FAILED",payload:o});case 14:case"end":return a.stop()}}),a,null,[[3,10]])})));return function(e){return a.apply(this,arguments)}}()},setSearchText:function(e){return{type:"SEARCH_TEXT/SET",payload:e}}},oe=Object(i.b)((function(e){return{movieSearchState:e.movieSearch,searchText:e.searchText}}),ce)(re),ie=function(){return r.a.createElement(k,null)},se=function(){return r.a.createElement(W,null)};var le=function(){return r.a.createElement(u.a,{basename:"/my-cinema"},r.a.createElement(te,null,r.a.createElement(m.a,{exact:!0,path:"/",component:oe}),r.a.createElement(m.a,{exact:!0,path:"/favorites",component:ie}),r.a.createElement(m.a,{exact:!0,path:"/watch-later",component:se})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=a(15),me=a(52),ve=a(41),de=a(53),Ee=a.n(de),he=a(54),_e=a(7),pe={isFetched:!1,isFetching:!1},fe=a(22),be={},ge={},Te={isFetched:!1,isFetching:!1},Oe=Object(ue.combineReducers)({movieSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_SEARCH/START":return Object(_e.a)(Object(_e.a)({},pe),{},{isFetching:!0});case"MOVIE_SEARCH/FAILED":return Object(_e.a)(Object(_e.a)({},pe),{},{isFetched:!1,isFetching:!1,error:t.payload});case"MOVIE_SEARCH/SUCCESS":return Object(_e.a)(Object(_e.a)({},pe),{},{isFetched:!0,isFetching:!1,data:t.payload});case"MOVIE_SEARCH/RESET":return pe;default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAVORITE/ADD":var a=t.payload.id;return Object(_e.a)(Object(_e.a)({},e),{},Object(fe.a)({},a,t.payload));case"FAVORITE/REMOVE":var n=t.payload.id;return delete e[n],Object(_e.a)({},e);default:return e}},watchLater:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WATCH_LATER/ADD":var a=t.payload.id;return Object(_e.a)(Object(_e.a)({},e),{},Object(fe.a)({},a,t.payload));case"WATCH_LATER/REMOVE":var n=t.payload.id;return delete e[n],Object(_e.a)({},e);default:return e}},trailer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_TRAILER_FETCH/START":return Object(_e.a)(Object(_e.a)({},Te),{},{isFetching:!0});case"MOVIE_TRAILER_FETCH/FAILED":return Object(_e.a)(Object(_e.a)({},Te),{},{isFetched:!1,isFetching:!1,error:t.payload});case"MOVIE_TRAILER_FETCH/SUCCESS":return Object(_e.a)(Object(_e.a)({},Te),{},{isFetched:!0,isFetching:!1,data:t.payload});case"MOVIE_TRAILER_FETCH/RESET":return Te;default:return e}},searchText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_TEXT/SET":return t.payload;default:return e}}}),Re={key:"my-cinema",whitelist:["favorites","watchLater"],storage:Ee.a},Ae=[he.a],ye=Object(ve.a)(Re,Oe),Ce=Object(ue.createStore)(ye,Object(me.composeWithDevTools)(ue.applyMiddleware.apply(void 0,Ae))),Fe=Object(ve.b)(Ce),Se={en:Object(_e.a)(Object(_e.a)(Object(_e.a)(Object(_e.a)(Object(_e.a)({},{"searchBar.placeholder":"Type the name of a movie"}),{"navBar.search":"search","navBar.watchLater":"watch later","navBar.favorites":"favorites","navBar.title":"My Cinema"}),{"movie.posterMissing":"no preview available","movie.noResults":"no movies here","movie.addToFavorites":"Add to favorites","movie.addToWatchLater":"Add to watch later","movie.removeFromFavorites":"Remove from favorites","movie.removeFromWatchLater":"Remove from watch later"}),{"pagination.next":"next","pagination.previous":"previous"}),{"movieTrailer.notFound":"Trailer not found"})};a(95);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:Ce},r.a.createElement(l.a,{loading:null,persistor:Fe},r.a.createElement(s.a,{locale:"en",messages:Se.en},r.a.createElement(le,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.12169537.chunk.js.map